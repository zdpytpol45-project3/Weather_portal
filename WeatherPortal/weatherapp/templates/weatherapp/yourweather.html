{% extends 'weatherapp/base_weather.html' %}
{% load static %}

{% block content %}

<h2>Hello, {{ user.username|default:'Guest' }} !</h2>

<div>
    {% if user.is_authenticated %}
        <a class="btn btn-danger" href="{% url 'logout' %}" role="button">Logout</a>
        <a class="btn btn-danger" href="{% url 'password_change' %}" role="button">Change Password</a>
    {% else %}
        <a class="btn btn-danger" href="{% url 'login' %}" role="button">Login</a>
        <a class="btn btn-danger" href="{% url 'register' %}" role="button">Register</a>
    {% endif %}
</div>

{% endblock %}


{% block section_one %}



<body>
    <section class="section">
        <div class="form_with_notification">
            <form method="POST">
                {% csrf_token %}
                <div class="form_with_submit">
                    <div class="get_from_add_city">
                        {{ form.name }}
                    </div>
                    <div class="form_submit">
                        <button type="submit" class="button_submit">
                            Add City
                        </button>
                    </div>
                </div>
                {% if message_for_user %}
                    <div class="notification_for_user">{{ message_for_user }}</div>
                {% endif %}
            </form>
        </div>
    </section>
    <section class="section">
        <div class="weather_city_info">
            {% for weather_in_city in cities_for_weather_data %}
            <div class="box">
                <article class="weather_media">
                    <div class="media_icon">
                        <figure class="weather_icon">
                            <img src="http://openweathermap.org/img/w/{{ weather_in_city.icon }}.png" alt="Image which show type of weather">
                        </figure>
                    </div>
                    <div class="media_value">
                        <p>
                            <span class="city_name"> {{ weather_in_city.city }} </span>
                            <br> <span class="cty_temperature"> Temp: {{ weather_in_city.temperature }}Â° C </span>
                            <br> <span class="cty_wind"> Wind: {{ weather_in_city.wind }} m/s </span>
                            <br> <span class="cty_description">{{ weather_in_city.description}} </span>
                        </p>
                    </div>
                    <div class="media_delete_button">
                        <a href="{% url 'delete_user_city' weather_in_city.city %}">
                            <button class="delete_button"></button>
                        </a>
                    </div>
                </article>
            </div>
            {% endfor %}
        </div>
    </section>
</body>
{% endblock %}
